(function(A){A.fn.monthSelector=function(C){var D=A.extend({minDate:new Date(1970,0,1),maxDate:new Date(),selectedDate:new Date(),callback:null,scope:window,text:{prev:"<<",next:">>"},css:{fieldset:"ms-fieldset",select:"ms-select",button:"ms-button",hovered:"ms-hovered",disabled:"ms-disabled"},monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]},C||{});if(!(D.minDate instanceof Date)){D.minDate=new Date(D.minDate)}if(!(D.maxDate instanceof Date)){D.maxDate=new Date(D.maxDate)}if(!(D.selectedDate instanceof Date)){D.selectedDate=new Date(D.selectedDate)}if(D.minDate.toString()==="Invalid Date"){throw new TypeError("$().monthSelector: Invalid minDate.")}if(D.maxDate.toString()==="Invalid Date"){throw new TypeError("$().monthSelector: Invalid maxDate.")}if(D.selectedDate.toString()==="Invalid Date"){throw new TypeError("$().monthSelector: Invalid selectedDate.")}if(D.minDate>D.maxDate){throw new Error("$().monthSelector: minDate exceeds maxDate.")}var B=function(G,F){return new Date((new Date(F,G,1)).getTime()-1)};var E=function(G,F){return new Date(F,G+1,1)};return this.each(function(){var M=A("<fieldset>").addClass(D.css.fieldset);var K=A("<select>").change(function(){P(N());this.blur()}).addClass(D.css.select);for(var I=0;I<12;++I){K.append(A("<option>").val(I).text(D.monthNames[I]))}var L=A("<select>").change(function(){P(N());this.blur()}).addClass(D.css.select);var J=D.maxDate.getFullYear();var O=D.minDate.getFullYear();for(var H=J;H>=O;--H){L.append(A("<option>").val(H).text(H))}var F=A('<input type="button">').click(function(){var Q=parseInt(L.val(),10);var R=parseInt(K.val(),10);P(B(R,Q));this.blur()}).addClass(D.css.button).val(D.text.prev);var G=A('<input type="button">').click(function(){var Q=parseInt(L.val(),10);var R=parseInt(K.val(),10);P(E(R,Q));this.blur()}).addClass(D.css.button).val(D.text.next);A.each([M,F,K,L,G],function(){var Q=this;Q.hover(function(){Q.addClass(D.css.hovered)},function(){Q.removeClass(D.css.hovered)})});M.append(F).append(K).append(L).append(G);var N=function(){var Q=parseInt(L.val(),10);var R=parseInt(K.val(),10);return new Date(Q,R,1)};var P=function(R){if(!(R instanceof Date)||R.toString()==="Invalid Date"){throw new TypeError("$().monthSelector::_setDate: Invalid date.")}if(R>D.maxDate){R=D.maxDate}else{if(R<D.minDate){R=D.minDate}}var U=R.getMonth();var S=R.getFullYear();K.val(U);L.val(S);var T=D.minDate.getMonth();var W=D.minDate.getFullYear();var V=D.maxDate.getMonth();var Q=D.maxDate.getFullYear();K.find("option").each(function(){var X=A(this);var Y=X.val();if(S===W&&Y<T||S===Q&&Y>V){X.attr("disabled","disabled").addClass(D.css.disabled)}else{X.removeAttr("disabled").removeClass(D.css.disabled)}});if(B(U,S)<D.minDate){F.attr("disabled","disabled").addClass(D.css.disabled)}else{F.removeAttr("disabled").removeClass(D.css.disabled)}if(E(U,S)>D.maxDate){G.attr("disabled","disabled").addClass(D.css.disabled)}else{G.removeAttr("disabled").removeClass(D.css.disabled)}if(typeof D.callback==="function"){D.callback.call(D.scope,N())}};P(D.selectedDate);A(this).append(M)})}})(jQuery);
